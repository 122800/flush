Item|Name|Contents|Links
ITM0|ZeldaDoc|0.1.0|""
ITM1|Introduction|"
Welcome to the 'Mellbye Flush' project.
The purpose of this document is to track all information
related to the development of this project.
This document is intended to be entirely self-descriptive,
and the unique and complete source of information
regarding this project.

The information in this document is organised
as a collection of items,
each item being identified by a unique number
denoted by the prefix 'ITM'.
References to other items are made
by wrapping the identifier in square brackets.
For example: [ITM1].

The tool you are using to view this document
may present hyperlinks to referenced items;
or if you are viewing this as plain text,
you may locate an item
or any other mentions of it
by running a search through the document.

Read [ITM33] for a guide to using this document.
For all other information,
go to the table of contents in [ITM2].
"|""
ITM2|Table of Contents|"
- [ITM1 ] : Introduction
- [ITM2 ]: Table of Contents
- [ITM33]: Document Guide
- [ITM27] : About this Document
- [IMPORTED10]: Functional Description
- [ITM32] : Feature List
- [ITM21] : Known Issues
- [ITM28] : Project Procedures
- [ITM9 ] : Implementation Plan
- [ITM10] : Methodology
- [ITM12] : To-do list
"|""
ITM3|Feature: View Game Data|"
Game data elements (ITM23) are visible and accessible to the user.
"|""
ITM4|Feature: Add Player|"
Details:
* A means of adding a new player is visible
"|""
ITM5|Feature: Remove Player|"
Details:
* A means of deleting a player is visible
"|""
ITM6|Concept: Player Name|"
The (nick)name of a player.
Textual.
Trimmed.
Globally unique.
At least 1 character.
"|"
Consumed:ITM18
"
ITM7|Feature: Inscribing Gains per Round|"
A player's gains (ITM8) can be inscribed for a given round.
"|""
ITM8|Concept: Player Gains (per round)|"
The points scored by a player during a single round.
Non-negative integer.
Multiples of '5' only.
Initialized to blank '' to indicate no data.
"|"
Consumed:ITM18
Encompassed:ITM13
"
ITM9|Implementation Plan|"
# Code-Complexity Consideration:

In favour of initial feature-development efficiency
we choose to forego aspirations of 'proper' implementation
using such alien technologies
as TypeScript,
HTML modules,
and the like.

As such, the initial build plan is
to simply use current knowledge of JS, HTML and CSS
to achieve functionality in an intuitive manner.

Additionally,
[ITM15] would have required implementation
of the full-blown CRUD-pub/sub framework.
Appropriate shortcuts will instead be taken
to avoid this complexity.

# Implementing [ITM13] (Score Calculation)

An HTML 'form' element is used
because it allows centralized event-handling
of all child elements.

To avoid submitting arbitrary tags to the scope of the 'form' tag,
the 'form' element will be defined separately
and referenced by detached 'input' elements.

In order to capture changes to [ITM8] elements,
their data will be stored in HTML 'input' elements.
This means that all features need to be reviewed
for compatibility or conflicts with this change.
Given that each 'input' can only have one 'form_id' tag,
it also means that the form must potentially comply
with a scope greater than only the [ITM13] feature.

The chosen scope is 'ITM8-gains-collection'
with one 'form' element per player,
and we'll see how it goes.

And actually you can use the HTML 'output' element for this!
"|""
ITM10|Methodology|"
Specific design choices and principles are outlined here in 'Methodology'.

* Project layout:
  ./src             : Code assets
  ./src/index.html  : Main file / Starting point

For simplicity we may choose to combine all assets
in a single file,
to begin with.
"|""
ITM11|Feature: View Program Meta-data|"
* The tool's name: `Mellbye Flush`
* The version number
"|""
ITM12|To-do List|"
P1
* [ITM5] Remove a player from the game
P3
FIXME:
  highlight when less than 50?
  highlight upcoming column?
  saving/suggesting usernames?

* Allow filling in from average of others
  for new-comers/quitters
* Ranking operation (ITM18) should be aware of invalidated rank
  when points change
  (let go of 'sorted' indication?)
* Improve page-reload warning (ITM20) behaviour
  when there are no unsaved changes
* Control & sanitize user input
* ITM18: fallback on alphabetical sort on equal points ranking
P4
* Configure relevant HTML 'meta' tags
  https://www.w3schools.com/tags/tag_meta.asp
  https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag
* Configure relevant HTML 'global' attributes
  https://www.w3schools.com/tags/ref_standardattributes.asp
"|""
ITM13|Feature: Player Score Calculation|"
Each player's score (ITM14) is displayed.
The scores (ITM14) are updated automatically (ITM15).
"|"
Encompasses:ITM8
"
ITM14|Concept: Player Score|"
The sum of all of a player's gains (ITM8).
"|"
Consumed:ITM18
"
ITM15|Concept(Technical): Dynamic Refresh|"
Code logic triggered by an event.
"|""
ITM16|Link: Encompass|"
An item encompasses or is encompassed.
An item relies/depends on the scope defined by another.
Updates to the encompassed item must be reflected
in the encompassing one.
"|""
ITM17|Feature: Game Round Labels|"
The 6 standard rounds are labeled as follows:
- `To tress`
- `En tress en serie`
- `To serier`
- `Tre tress`
- `To tress en serie`
- `En tress to serier`
"|""
ITM18|Feature: Player Ranking|"
Player ranking is available through a visual sort operation (ASC only).
- The sort can be applied from:
  * Player name (ITM6) (the default)
  * Player gains (ITM8) for a round
    * In case of equal gains,
      unspecified sort order is acceptable.
  * Player score (ITM14)
- The availability of the ranking functionality
  should be indicated to the user.
"|"
Consumes:ITM6
Consumes:ITM8
Consumes:ITM14
"
ITM19|Link: Consume|"
An item consumes or is consumed.
An item processes the contents of another.
Datatype constraints from the consumed item
are transferred / must be handled by the consuming one.
Updates to the consumed item
may need to be reflected in the consuming one.
"|""
ITM20|Feature: Accidental Reset Protection|"
A security mechanism is in place
to avoid accidentally losing the game data (ITM23)
by closing or reloading the page.
"|""
ITM21|Known Issues|"
* [ITM22] BFCache Incompatibility
* [ITM31] Accessibility
"|""
ITM22|Issue: BFCache Incompatibility|"
Use of the 'beforeunload event' results in incompatibility
with the bfcache browser mechanism,
as documented in [1], [2].
[1]: https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event
[2]: https://web.dev/bfcache/
"|""
ITM23|Concept: Game Data|"
Game data-points provided by the user.
These cannot be regenerated or calculated automatically
and must be protected from data loss or corruption.
* Player names (ITM6)
* Player gains (ITM8) for each round
"|""
ITM24|Feature: Edit Player Name|"
* A player's name (ITM6) can be modified
"|""
ITM25|Feature: Initial Player Loadout|"
An initial set of 4 (unnamed) players are created
automatically on loading, for convenience.
"|""
ITM26|Feature: Viewing Comfort of Visible Content|"
Visible content is sized comfortably for use on all devices.
With minimal need for manual resizing, the user can:
* Comfortably use all functionality
* Show/display the game progress (ITM3) to others nearby
"|""
ITM27|About this Document|"
This section is not yet fully documented.
Types of links: [ITM16], [ITM19].
"|""
ITM28|Project Procedures|"
This section is not yet fully documented.
- [ITM29] Release
"|""
ITM29|Procedure: Release|"
This section is not yet fully documented.
- Use branch `release` to bump version number.
- Export to file: `MellbyeFlush-{version}.html`
- Share through Proton Drive
  * With password & expiration date?
  * Indicate basic use instructions:
    * File must be downloaded
    * No need to download again
    * Can be run with phone's browser
"|""
ITM30|Feature: Device Incompatibility Warning|"
In case of incompatibility with the device,
a warning is displayed to clarify the situation.
The following situations are handled:
* Absence of JavaScript
"|""
ITM31|Issue: Accessibility|"
No particular consideration has yet been taken
to ensure adequate accessibility for users requiring it.
"|""
ITM32|Feature List|"
This item details the complete list of features
provided to the user.
Every command that the user may give,
as well as every behaviour that can be expected
from the tool,
must have documentation accessible through this item.
To encourage a user-centric design,
the features in this list are expressed so as to fit the form
« The user can… »

* [ITM26] : Comfortably view all visible content from any device
* [ITM17] : View an appropriate label for each game round
* [ITM25] : Benefit from an initial set of players for convenience
* [ITM3 ] : View all game data (ITM23) elements
* [ITM13] : View each player's calculated player score (ITM14)
* [ITM7 ] : Inscribe a player's gains for a given round
* [ITM4 ] : Add a player to the game
* [ITM24] : Edit a player's name
* [ITM18] : Consult the players' ranking
* [ITM20] : Be safeguarded against accidental loss of game data (ITM23)
            on page close/reload
* [ITM11] : View additional meta-data relative to the program
* [ITM30] : See a warning in case of incompatibility with the device

Tentative features:

* View the scores (ITM14) up to an arbitrary round (mini-graph?)
* Export game data (ITM23) to text format
* Benefit from all features with mobile-friendly/first considerations
* Have access to a reminder of the rules for consultation
* Virtualization of gameplay
* A little (star, trophy?) icon to highlight each round's winner

TODO: split feature description into 'functional need',
'abstract model', and 'technical implementation'
"|""
ITM33|ZeldaDoc: Document Guide|"
This guide will explain the concepts behind this document,
as well as how to read and understand its structure.
It will not explain elements pertaining to the development project itself.
If that is what you are looking for,
consult the table of contents ([ITM2]).

Read through the following sections for guides
to the different aspects of this document:
* [ITM34]: Rationale
* [ITM35]: Item Structure
* [IMPORTED4]: Segment Definitions
"|""
ITM34|ZeldaDoc: Rationale|"
The style in which this document is written
arose out of a desire for better governance
over the entirety of a project.

TODO: organize these points:
* 1 place to access all documentation, or links thereto
* an organized structure where every element finds a place, no orphans
* the need for the document to explain itself, with assumption of plain text
"|""
ITM35|ZeldaDoc: Item Structure|"
Items are composed of segments,
and all data or meta-data pertaining to the item
is organized in these segments.
This document defines several types of segments,
and every item in the document shares this same structure.

As an example,
in a flat data representation,
this document could be seen as a table
in which every item is a line,
and segments would be the columns
into which data is distributed.

Save for the very first items,
the numerical ID or the order
in which items are defined or positioned in the document
is not important.
It is therefore better to navigate by following links
than by reading the items 'in order' numerically
or from top to bottom.
The first two items,
[ITM0] and [ITM1],
hold a special place as the starting points for the document.

The reference for the document's segments and their definitions
can be found in [IMPORTED4].
"|""
IMPORTED4|ZeldaDoc: Segment Definitions|"
- Item: [IMPORTED5]
- Name: [IMPORTED6]
- Contents: [IMPORTED7]
"|""
IMPORTED5|ZeldaDoc: Segment Definition: Item|"
The item's numerical ID.
Immutable.
The number is prefixed by the letters 'IMPORTED'.
Zeroes ('0') may be added
to pad the number to a certain length,
without changing the validity of the ID
(e.g. 'IMPORTED005').
"|""
IMPORTED6|ZeldaDoc: Segment Definition: Name|"
The short primary title
or human-friendly identifier
of the item.
Can be subject to change;
only the item's ID ([IMPORTED5]) must be used
to durably reference an item.
"|""
IMPORTED7|ZeldaDoc: Segment Definition: Contents|"
The primary contents of the item,
intended to be read by the user.
The contents may vary greatly from item to item.
"|""
IMPORTED10|Functional Description|"
This tool's function is to allow a user
to perform an automated backup of arbitrary content
hosted in other locations,
with the possibility of tracking incremental updates
to the backup.
"|""
IMPORTED12|Feature: Launch backup|"
The user is able to launch the 'backup' command.
This feature includes the following sub-features:
* [IMPORTED14] Monitor operation progress
"|""
IMPORTED13|Feature: Access backed-up files|"
The user can access and view the backed-up data
in a human-readable format.
"|""
IMPORTED14|Sub-feature: Monitor operation progress|"
The user is shown the progression
of a long-running operation.
The user is notified
of important life-cycle events of the operation:
- Started
- Paused
- Resumed
- Stopped
"|""
IMPORTED15|Feature: Query state of backup|"
The user can access an overview
of the current state of the backup.
The following information is provided:
* Timestamp of last backup
* Current size of backup
* Number of items backed up
"|""
